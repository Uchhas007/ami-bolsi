{% extends "layout.html" %}
{% block body %}

<!-- Page Header--> 
<header class="masthead" style="background-image: url('{{ url_for('static', filename='assets/img/home-bg.jpg') }}');">    
    <div class="container position-relative px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7 text-center text-white">
                <div class="site-heading">
                    <h1 class="display-3">ADD/EDIT POST</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main Content-->
<div class="container px-4 px-lg-5 mt-5">
    <div class="row gx-4 gx-lg-5 justify-content-center">
        <div class="col-md-10 col-lg-8 col-xl-7">

            <!-- Welcome Message -->
            <div class="post-preview text-center mb-4">
                <h2 class="title display-4 text-primary">Welcome to the Admin Panel, Boss!</h2>
                <h3 class="subtitle text-muted">Do as much brainrot as you want</h3>
                <hr>
                <div class="d-flex justify-content-center gap-3">
                    <a href="/dashboard" class="btn btn-success btn-lg">Dashboard</a>
                    <a href="/logout" class="btn btn-danger btn-lg">Logout</a>
                </div>
                <hr>
            </div>

            <!-- Post Editing Form -->
            <div class="card shadow-lg p-4 rounded">
                <form name="sentMessage" id="contactForm" action="/edit/{{ sno }}" method="post" novalidate>
                    <div class="form-floating mb-3">
                        <input class="form-control" id="title" name="title" type="text" data-sb-validations="required" value="{{ post.title }}" required />
                        <label for="title">Title</label>
                        <div class="invalid-feedback" data-sb-feedback="title:required">A title is required.</div>
                    </div>
                    
                    <div class="form-floating mb-3">
                        <input class="form-control" id="tline" name="tline" type="text" data-sb-validations="required" value="{{ post.tagline }}" required />
                        <label for="tline">Tagline</label>
                        <div class="invalid-feedback" data-sb-feedback="tline:required">A tagline is required.</div>
                    </div>

                    <div class="form-floating mb-3">
                        <input class="form-control" id="slug" name="slug" type="text" data-sb-validations="required" value="{{ post.slug }}" required />
                        <label for="slug">Slug</label>
                        <div class="invalid-feedback" data-sb-feedback="slug:required">Slug is required.</div>
                    </div>

                    <div class="form-floating mb-3">
                        <textarea class="form-control" id="content" name="content" style="height: 10rem" data-sb-validations="required" required>{{ post.content if post else '' }}</textarea>
                        <label for="content">Content</label>
                        <div class="invalid-feedback" data-sb-feedback="content:required">Content is required.</div>
                    </div>

                    <div class="form-floating mb-4">
                        <input class="form-control" id="img_file" name="img_file" type="text" style="height: 7rem" data-sb-validations="required" value="{{ post.img_file }}" required />
                        <label for="img_file">Image File</label>
                        <div class="invalid-feedback" data-sb-feedback="img_file:required">Image file path is required.</div>
                    </div>

                    <!-- Submit Button -->
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg" id="sendMessageButton">Submit</button>
                    </div>
                </form>
            </div>

            <!-- Submit Success/Error Message (hidden initially) -->
            <div class="d-none" id="submitSuccessMessage">
                <div class="text-center mb-3">
                    <div class="fw-bolder">Form submission successful!</div>
                    To activate this form, sign up at
                    <br />
                    <a href="https://startbootstrap.com/solution/contact-forms">https://startbootstrap.com/solution/contact-forms</a>
                </div>
            </div>

            <div class="d-none" id="submitErrorMessage">
                <div class="text-center text-danger mb-3">Error sending message!</div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
